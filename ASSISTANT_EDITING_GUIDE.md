# ✏️ Редактирование предустановленных помощников

## Обзор
Добавлена возможность редактирования предустановленных AI помощников в разделе "Настройки диалогов".

## 🎯 Новые возможности

### ✏️ Редактирование помощников
- **Кнопка "Редактировать"** - в списке каждого помощника
- **Модальное окно редактирования** - с полной формой редактирования
- **Автозаполнение полей** - текущие значения помощника
- **Валидация** - проверка обязательных полей
- **Обновление в реальном времени** - изменения сохраняются сразу

### 🔧 Доступные поля для редактирования
- **Название** - имя помощника
- **Описание** - краткое описание помощника
- **Системный промпт** - инструкции для AI
- **Модель** - выбор AI модели с группировкой по провайдерам
- **Temperature** - креативность ответов (0.1-1.0)
- **Максимум токенов** - максимальная длина ответа

## 🚀 Как использовать

### 1. Открыть настройки диалогов
1. Перейдите в "Настройки диалогов"
2. Найдите раздел "Предустановленные помощники"

### 2. Редактировать помощника
1. Нажмите кнопку **"Редактировать"** рядом с нужным помощником
2. Откроется модальное окно с текущими настройками
3. Измените нужные поля
4. Нажмите **"Сохранить изменения"**

### 3. Применить изменения
- Изменения сохраняются автоматически
- Список помощников обновляется
- Помощник можно сразу применить к диалогу

## 🎨 Интерфейс

### Список помощников
```
┌─────────────────────────────────────────────────────────┐
│ 🤖 Аналитик данных                    [GPT-4o]         │
│ Анализирует данные и создает отчеты                    │
│ [Применить] [✏️ Редактировать] [🗑️ Удалить]           │
└─────────────────────────────────────────────────────────┘
```

### Модальное окно редактирования
```
┌─────────────────────────────────────────────────────────┐
│ ✏️ Редактировать помощника                             │
├─────────────────────────────────────────────────────────┤
│ Название: [Аналитик данных]                            │
│ Описание: [Анализирует данные...]                      │
│ Системный промпт: [Ты - аналитик...]                   │
│ Модель: [GPT-4o ▼] Temperature: [0.7 ▼]               │
│ Максимум токенов: [1000]                               │
│ [Сохранить изменения] [Отмена]                         │
└─────────────────────────────────────────────────────────┘
```

## 🔧 Технические детали

### API Endpoints
- `PUT /assistants/{id}` - обновление помощника
- `GET /assistants/{id}` - получение данных помощника
- `GET /assistants` - список всех помощников

### Состояние компонента
```javascript
const [showEditAssistantModal, setShowEditAssistantModal] = useState(false);
const [editingAssistant, setEditingAssistant] = useState(null);
```

### Функции
- `handleEditAssistant(assistant)` - открытие модального окна
- `handleUpdateAssistant(values)` - сохранение изменений
- `assistantForm.setFieldsValue(assistant)` - автозаполнение полей

## 🧪 Тестирование

### Автоматическое тестирование
```bash
chmod +x test-assistant-editing.sh
./test-assistant-editing.sh
```

### Ручное тестирование
1. Создайте тестового помощника
2. Отредактируйте его настройки
3. Проверьте, что изменения сохранились
4. Примените помощника к диалогу
5. Удалите тестового помощника

## 📋 Примеры использования

### Изменение модели помощника
1. Откройте помощника "Аналитик данных"
2. Измените модель с GPT-4o на Claude 3.5 Sonnet
3. Сохраните изменения
4. Помощник теперь использует новую модель

### Обновление системного промпта
1. Выберите помощника для редактирования
2. Измените системный промпт
3. Добавьте новые инструкции
4. Сохраните изменения

### Настройка параметров
1. Откройте помощника
2. Измените temperature для большей/меньшей креативности
3. Увеличьте max_tokens для более длинных ответов
4. Сохраните изменения

## ⚡ Преимущества

### Для пользователей
- ✅ **Гибкость** - можно настроить любого помощника
- ✅ **Удобство** - интуитивный интерфейс редактирования
- ✅ **Быстрота** - изменения применяются мгновенно
- ✅ **Безопасность** - валидация полей

### Для разработчиков
- ✅ **Переиспользование** - одна форма для создания и редактирования
- ✅ **Консистентность** - одинаковый UX для всех операций
- ✅ **Масштабируемость** - легко добавить новые поля

## 🔍 Отладка

### Если редактирование не работает
1. Проверьте консоль браузера на ошибки
2. Убедитесь, что backend запущен
3. Проверьте API endpoint `/assistants/{id}`
4. Проверьте права доступа к базе данных

### Логи для отладки
```bash
# Backend логи
docker-compose logs backend

# Frontend логи
docker-compose logs frontend

# Проверка API
curl -X GET http://localhost:8000/assistants
```

## 🎯 Планы развития

### Возможные улучшения
- **Клонирование помощников** - создание копий
- **Импорт/экспорт** - сохранение настроек
- **Версионирование** - история изменений
- **Шаблоны** - готовые наборы настроек
- **Предпросмотр** - тестирование промптов

## 📚 Связанная документация

- [AI_MODELS_GUIDE.md](./AI_MODELS_GUIDE.md) - Руководство по AI моделям
- [NGINX_SETUP.md](./NGINX_SETUP.md) - Настройка Nginx
- [SERVER_SETUP.md](./SERVER_SETUP.md) - Настройка сервера
